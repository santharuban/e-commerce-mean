{"ast":null,"code":"import { UpdateComponent } from \"../update/update.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/admin.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"../service/cart.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"ngx-pagination\";\nimport * as i8 from \"../header/header.component\";\nfunction ViewEditProductComponent_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵelement(6, \"img\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\")(16, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ViewEditProductComponent_tr_24_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.updateSubmit(item_r1._id));\n    });\n    i0.ɵɵtext(17, \" update \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"td\")(19, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ViewEditProductComponent_tr_24_Template_button_click_19_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onSubmit(item_r1._id));\n    });\n    i0.ɵɵtext(20, \" remove \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r2 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", item_r1.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.total);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.category);\n  }\n}\nconst _c0 = function (a1) {\n  return {\n    itemsPerPage: 5,\n    currentPage: a1\n  };\n};\nexport class ViewEditProductComponent {\n  constructor(admin, router, toastrService, dialog, cart) {\n    this.admin = admin;\n    this.router = router;\n    this.toastrService = toastrService;\n    this.dialog = dialog;\n    this.cart = cart;\n    this.limit = 5;\n    this.sort = \"\";\n    this.totalPages = 0;\n    this.prevPage = null;\n    this.nextPage = null;\n  }\n  ngOnInit() {\n    this.getProducts();\n  }\n  getProducts() {\n    this.admin.getProducts(this.page, this.limit).subscribe(res => {\n      this.items = res.data;\n      this.totalPages = res.totalPages;\n      this.prevPage = res.prevPage;\n      this.nextPage = res.nextPage;\n    });\n  }\n  onSubmit(deleteproduct) {\n    this.admin.deleteProducts(deleteproduct).subscribe(res => {\n      this.toastrService.info(\"product is deleted\");\n      this.getProducts();\n    }, error => {\n      this.toastrService.error(`${error.name} error ${error.status}`);\n    });\n  }\n  updateSubmit(data) {\n    localStorage.setItem(\"id\", data);\n    this.dialog.open(UpdateComponent).afterClosed().subscribe(() => {\n      this.getProducts();\n    });\n  }\n  goToPrevPage() {\n    if (this.prevPage !== null) {\n      this.page = this.prevPage;\n      this.getProducts();\n    }\n  }\n  goToNextPage() {\n    if (this.nextPage !== null) {\n      this.page = this.nextPage;\n      this.getProducts();\n    }\n  }\n  paget() {\n    return this.page = this.page + 1;\n  }\n}\nViewEditProductComponent.ɵfac = function ViewEditProductComponent_Factory(t) {\n  return new (t || ViewEditProductComponent)(i0.ɵɵdirectiveInject(i1.AdminService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.MatDialog), i0.ɵɵdirectiveInject(i5.CartService));\n};\nViewEditProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ViewEditProductComponent,\n  selectors: [[\"app-view-edit-product\"]],\n  decls: 28,\n  vars: 6,\n  consts: [[\"id\", \"class\"], [\"routerLink\", \"/admin\", 1, \"back\"], [1, \"container\"], [1, \"card-table\"], [1, \"cart-product\"], [1, \"table\", \"table-responsive\"], [4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\", \"justify-content-center\"], [\"onclick\", \"paget()\", 3, \"pageChange\"], [\"alt\", \"\", 2, \"width\", \"100px\", \"height\", \"80px\", 3, \"src\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function ViewEditProductComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-header\");\n      i0.ɵɵelementStart(1, \"body\", 0)(2, \"div\")(3, \"button\", 1);\n      i0.ɵɵtext(4, \"back\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 2)(6, \"div\", 3)(7, \"div\", 4)(8, \"table\", 5)(9, \"thead\")(10, \"tr\")(11, \"th\");\n      i0.ɵɵtext(12, \"No\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"th\");\n      i0.ɵɵtext(14, \"Item name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\");\n      i0.ɵɵtext(16, \"Item image\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"th\");\n      i0.ɵɵtext(18, \"price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"th\");\n      i0.ɵɵtext(20, \"quantity\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"th\");\n      i0.ɵɵtext(22, \"category\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(23, \"tbody\");\n      i0.ɵɵtemplate(24, ViewEditProductComponent_tr_24_Template, 21, 7, \"tr\", 6);\n      i0.ɵɵpipe(25, \"paginate\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"div\", 7)(27, \"pagination-controls\", 8);\n      i0.ɵɵlistener(\"pageChange\", function ViewEditProductComponent_Template_pagination_controls_pageChange_27_listener($event) {\n        return ctx.page = $event;\n      });\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(24);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(25, 1, ctx.items, i0.ɵɵpureFunction1(4, _c0, ctx.page)));\n    }\n  },\n  dependencies: [i6.NgForOf, i2.RouterLink, i7.PaginationControlsComponent, i8.HeaderComponent, i7.PaginatePipe],\n  styles: [\".container[_ngcontent-%COMP%] {\\n  padding-top: 150px;\\n  padding-bottom: 150px;\\n  background-color: #ccc;\\n}\\n\\n#class[_ngcontent-%COMP%] {\\n  background-color: #deebdd;\\n}\\n\\n.back[_ngcontent-%COMP%] {\\n  position: fixed;\\n  top: 130px;\\n  margin-left: 15px;\\n  border-radius: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdmlldy1lZGl0LXByb2R1Y3Qvdmlldy1lZGl0LXByb2R1Y3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtFQUNsQixxQkFBcUI7RUFDckIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFVBQVU7RUFDVixpQkFBaUI7RUFDakIsbUJBQW1CO0FBQ3JCIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XG4gIHBhZGRpbmctdG9wOiAxNTBweDtcbiAgcGFkZGluZy1ib3R0b206IDE1MHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjO1xufVxuXG4jY2xhc3Mge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGVlYmRkO1xufVxuXG4uYmFjayB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAxMzBweDtcbiAgbWFyZ2luLWxlZnQ6IDE1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDMwcHg7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AAiEA,SAASA,eAAe,QAAQ,4BAA4B;;;;;;;;;;;;;IC5ChDC,0BAA0F;IACpFA,YAAW;IAAAA,iBAAK;IACpBA,0BAAI;IAAAA,YAAgB;IAAAA,iBAAK;IACzBA,0BAAI;IACFA,yBAIE;IACJA,iBAAK;IACLA,0BAAI;IAAAA,YAAgB;IAAAA,iBAAK;IACzBA,0BAAI;IAAAA,aAAmB;IAAAA,iBAAK;IAC5BA,2BAAI;IAAAA,aAAgB;IAAAA,iBAAK;IACzBA,2BAAI;IAAAA,aAAmB;IAAAA,iBAAK;IAC5BA,2BAAI;IAEAA;MAAA;MAAA;MAAA;MAAA,OAASA,+CAAsB;IAAA,EAAC;IAGhCA,yBACF;IAAAA,iBAAS;IAEXA,2BAAI;IACMA;MAAA;MAAA;MAAA;MAAA,OAASA,2CAAkB;IAAA,EAAC;IAClCA,yBACF;IAAAA,iBAAS;;;;;IAxBPA,eAAW;IAAXA,8BAAW;IACXA,eAAgB;IAAhBA,mCAAgB;IAIhBA,eAAsB;IAAtBA,gEAAsB;IAItBA,eAAgB;IAAhBA,mCAAgB;IAChBA,eAAmB;IAAnBA,sCAAmB;IACnBA,eAAgB;IAAhBA,mCAAgB;IAChBA,eAAmB;IAAnBA,sCAAmB;;;;;;;;;ADuCrC,OAAM,MAAOC,wBAAwB;EASnCC,YACUC,KAAmB,EACnBC,MAAc,EACdC,aAA4B,EAC7BC,MAAiB,EAChBC,IAAiB;IAJjB,UAAK,GAALJ,KAAK;IACL,WAAM,GAANC,MAAM;IACN,kBAAa,GAAbC,aAAa;IACd,WAAM,GAANC,MAAM;IACL,SAAI,GAAJC,IAAI;IAXd,UAAK,GAAW,CAAC;IACjB,SAAI,GAAW,EAAE;IACjB,eAAU,GAAW,CAAC;IACtB,aAAQ,GAAkB,IAAI;IAC9B,aAAQ,GAAkB,IAAI;EAQ3B;EAEHC,QAAQ;IACN,IAAI,CAACC,WAAW,EAAE;EACpB;EAEAA,WAAW;IACT,IAAI,CAACN,KAAK,CACPM,WAAW,CAAC,IAAI,CAACC,IAAI,EAAC,IAAI,CAACC,KAAK,CAAC,CACjCC,SAAS,CAAEC,GAAG,IAAI;MACjB,IAAI,CAACC,KAAK,GAAGD,GAAG,CAACE,IAAI;MACrB,IAAI,CAACC,UAAU,GAAGH,GAAG,CAACG,UAAU;MAChC,IAAI,CAACC,QAAQ,GAAGJ,GAAG,CAACI,QAAQ;MAC5B,IAAI,CAACC,QAAQ,GAAGL,GAAG,CAACK,QAAQ;IAC9B,CAAC,CAAC;EACN;EAEAC,QAAQ,CAACC,aAAqB;IAC5B,IAAI,CAACjB,KAAK,CAACkB,cAAc,CAACD,aAAa,CAAC,CAACR,SAAS,CAC/CC,GAAG,IAAI;MACN,IAAI,CAACR,aAAa,CAACiB,IAAI,CAAC,oBAAoB,CAAC;MAC7C,IAAI,CAACb,WAAW,EAAE;IACpB,CAAC,EACAc,KAAK,IAAI;MACR,IAAI,CAAClB,aAAa,CAACkB,KAAK,CAAC,GAAGA,KAAK,CAACC,IAAI,UAAUD,KAAK,CAACE,MAAM,EAAE,CAAC;IACjE,CAAC,CACF;EACH;EAEAC,YAAY,CAACX,IAAS;IACpBY,YAAY,CAACC,OAAO,CAAC,IAAI,EAAEb,IAAI,CAAC;IAChC,IAAI,CAACT,MAAM,CACRuB,IAAI,CAAC9B,eAAe,CAAC,CACrB+B,WAAW,EAAE,CACblB,SAAS,CAAC,MAAK;MACd,IAAI,CAACH,WAAW,EAAE;IACpB,CAAC,CAAC;EACN;EAEAsB,YAAY;IACV,IAAI,IAAI,CAACd,QAAQ,KAAK,IAAI,EAAE;MAC1B,IAAI,CAACP,IAAI,GAAG,IAAI,CAACO,QAAQ;MACzB,IAAI,CAACR,WAAW,EAAE;;EAEtB;EAEAuB,YAAY;IACV,IAAI,IAAI,CAACd,QAAQ,KAAK,IAAI,EAAE;MAC1B,IAAI,CAACR,IAAI,GAAG,IAAI,CAACQ,QAAQ;MACzB,IAAI,CAACT,WAAW,EAAE;;EAEtB;EACAwB,KAAK;IACJ,OAAO,IAAI,CAACvB,IAAI,GAAC,IAAI,CAACA,IAAI,GAAC,CAAC;EAC7B;;AArEWT,wBAAwB;mBAAxBA,wBAAwB;AAAA;AAAxBA,wBAAwB;QAAxBA,wBAAwB;EAAAiC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCzErCtC,6BAAyB;MAEzBA,+BAAiB;MAE4BA,oBAAI;MAAAA,iBAAS;MAExDA,8BAAuB;MAMPA,mBAAE;MAAAA,iBAAK;MACXA,2BAAI;MAAAA,0BAAS;MAAAA,iBAAK;MAClBA,2BAAI;MAAAA,2BAAU;MAAAA,iBAAK;MACnBA,2BAAI;MAAAA,sBAAK;MAAAA,iBAAK;MACdA,2BAAI;MAAAA,yBAAQ;MAAAA,iBAAK;MACjBA,2BAAI;MAAAA,yBAAQ;MAAAA,iBAAK;MAGrBA,8BAAO;MACLA,0EA2BK;;MACPA,iBAAQ;MAEVA,+BAA2C;MACpBA;QAAA;MAAA,EAA4B;MAAmBA,iBAAsB;;;MA/BnEA,gBAAsD;MAAtDA,gGAAsD","names":["UpdateComponent","i0","ViewEditProductComponent","constructor","admin","router","toastrService","dialog","cart","ngOnInit","getProducts","page","limit","subscribe","res","items","data","totalPages","prevPage","nextPage","onSubmit","deleteproduct","deleteProducts","info","error","name","status","updateSubmit","localStorage","setItem","open","afterClosed","goToPrevPage","goToNextPage","paget","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/asplap3259/Desktop/e-commerce-mean/frontend/src/app/view-edit-product/view-edit-product.component.ts","/home/asplap3259/Desktop/e-commerce-mean/frontend/src/app/view-edit-product/view-edit-product.component.html"],"sourcesContent":["// import { Component, OnChanges, OnInit,ViewChild } from \"@angular/core\";\n// import { Router } from \"@angular/router\";\n// import { products } from \"datatype\";\n// import { ToastrService } from \"ngx-toastr\";\n// import { AdminService } from \"../service/admin.service\";\n// import { MatDialog } from \"@angular/material/dialog\";\n// import { UpdateComponent } from \"../update/update.component\";\n// import { CartService } from \"../service/cart.service\";\n\n\n\n// @Component({\n//   selector: \"app-view-edit-product\",\n//   templateUrl: \"./view-edit-product.component.html\",\n//   styleUrls: [\"./view-edit-product.component.css\"],\n// })\n// export class ViewEditProductComponent implements OnInit {\n//   public items!: products[];\n//   page:number=11;\n//   constructor(\n//     private admin: AdminService,\n//     private router: Router,\n//     private toastrService: ToastrService,\n//     public dialog: MatDialog,\n//     private cart: CartService,\n//   ) {}\n//   ngOnInit(): void {\n//     this.getProducts();\n//   }\n//   getProducts() {\n//     this.admin.getProducts().subscribe((res) => {\n//       this.items = res.data;\n//       console.log(res.data)\n//     });\n    \n//   }\n//   onSubmit(deleteproduct: number) {\n//     this.admin.deleteProducts(deleteproduct).subscribe(\n//       (res) => {\n//         this.toastrService.info(\"product is deleted\");\n//         this.getProducts();\n//       },\n//       (error) => {\n//         this.toastrService.error(`${error.name} error ${error.status}`);\n//       }\n//     );\n//     this.getProducts();\n//   }\n//   updateSubmit(data: any) {\n//     localStorage.setItem(\"id\", data);\n//     this.dialog\n//       .open(UpdateComponent)\n//       .afterClosed()\n//       .subscribe(() => {\n//         this.getProducts();\n//       });\n//   }\n// }\n\nimport { Component, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { products } from \"datatype\";\nimport { ToastrService } from \"ngx-toastr\";\nimport { AdminService } from \"../service/admin.service\";\nimport { MatDialog } from \"@angular/material/dialog\";\nimport { UpdateComponent } from \"../update/update.component\";\nimport { CartService } from \"../service/cart.service\";\n\n@Component({\n  selector: \"app-view-edit-product\",\n  templateUrl: \"./view-edit-product.component.html\",\n  styleUrls: [\"./view-edit-product.component.css\"],\n})\nexport class ViewEditProductComponent implements OnInit {\n  public items!: products[];\n  public page!: number;\n  limit: number = 5;\n  sort: string = \"\";\n  totalPages: number = 0;\n  prevPage: number | null = null;\n  nextPage: number | null = null;\n\n  constructor(\n    private admin: AdminService,\n    private router: Router,\n    private toastrService: ToastrService,\n    public dialog: MatDialog,\n    private cart: CartService\n  ) {}\n\n  ngOnInit(): void {\n    this.getProducts();\n  }\n\n  getProducts() {\n    this.admin\n      .getProducts(this.page,this.limit)\n      .subscribe((res) => {\n        this.items = res.data;\n        this.totalPages = res.totalPages;\n        this.prevPage = res.prevPage;\n        this.nextPage = res.nextPage;\n      });\n  }\n\n  onSubmit(deleteproduct: number) {\n    this.admin.deleteProducts(deleteproduct).subscribe(\n      (res) => {\n        this.toastrService.info(\"product is deleted\");\n        this.getProducts();\n      },\n      (error) => {\n        this.toastrService.error(`${error.name} error ${error.status}`);\n      }\n    );\n  }\n\n  updateSubmit(data: any) {\n    localStorage.setItem(\"id\", data);\n    this.dialog\n      .open(UpdateComponent)\n      .afterClosed()\n      .subscribe(() => {\n        this.getProducts();\n      });\n  }\n\n  goToPrevPage() {\n    if (this.prevPage !== null) {\n      this.page = this.prevPage;\n      this.getProducts();\n    }\n  }\n\n  goToNextPage() {\n    if (this.nextPage !== null) {\n      this.page = this.nextPage;\n      this.getProducts();\n    }\n  }\n  paget(){\n   return this.page=this.page+1\n  }\n}\n\n","<app-header></app-header>\n\n<body id=\"class\">\n  <div>\n    <button class=\"back\" routerLink=\"/admin\">back</button>\n  </div>\n  <div class=\"container\">\n    <div class=\"card-table\">\n      <div class=\"cart-product\">\n        <table class=\"table table-responsive\">\n          <thead>\n            <tr>\n              <th>No</th>\n              <th>Item name</th>\n              <th>Item image</th>\n              <th>price</th>\n              <th>quantity</th>\n              <th>category</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let item of items | paginate:{itemsPerPage:5,currentPage:page} let i = index\">\n              <td>{{ i + 1 }}</td>\n              <td>{{ item.title }}</td>\n              <td>\n                <img\n                  style=\"width: 100px; height: 80px\"\n                  src=\"{{ item.image }}\"\n                  alt=\"\"\n                />\n              </td>\n              <td>{{ item.price }}</td>\n              <td>{{ item.quantity }}</td>\n              <td>{{ item.total }}</td>\n              <td>{{ item.category }}</td>\n              <td>\n                <button\n                  (click)=\"updateSubmit(item._id)\"\n                  class=\"btn btn-primary\"\n                >\n                  update\n                </button>\n              </td>\n              <td>\n                <button (click)=\"onSubmit(item._id)\" class=\"btn btn-danger\">\n                  remove\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"d-flex justify-content-center\">\n          <pagination-controls (pageChange)=\"page = $event\" onclick=\"paget()\"></pagination-controls>\n        </div>\n      </div>\n    </div>\n  </div>\n</body>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}